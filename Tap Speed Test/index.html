<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Tap Speed Tester — Gamepad A Double-Tap</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<div class="bg"></div>
	<main class="container">
		<header class="header">
			<h1>Wall Dash Tester</h1>
			<p class="subtitle">Measure time between button taps for Rocket League wall dashes.</p>
		</header>

		<section class="controls card">
			<div class="row">
				<button id="resetBtn" class="ghost" disabled>Reset</button>
				<button id="toggleSoundBtn" class="ghost">Tap Sound: On</button>
				<button id="openOverlayBtn" class="ghost">Open Overlay</button>
				<button id="kbmModeBtn" class="ghost">KB/M mode: Off</button>
				<button id="scrollWheelBtn" class="ghost">Scroll Wheel: Off</button>
				<button id="aboutBtn" class="ghost about-btn">About</button>
			</div>
			<div class="row info">
				<div>
					<label class="label" for="multiPadsChk">Allow Multiple Game Pad Inputs</label>
					<input id="multiPadsChk" type="checkbox">
				</div>
				<div>
					<div class="label">Gamepad</div>
					<div id="padName" class="value">Not connected</div>
				</div>
				<div class="row-break"></div>
				<div class="bind-buttons">
					<button id="bindTapBtn" class="rebind">Bind Tap: <span id="bindTapText">A (0)</span></button>
					<button id="bindRestartBtn" class="rebind">Bind Restart: <span id="bindRestartText">B (1)</span></button>
				</div>
			</div>
			<p class="hint">Press your controller’s A button. This page uses the Gamepad API; connect your controller and press any button once to wake it up.</p>
		</section>

		<section class="audio card">
			<div class="graph-header">
				<h2>Audio benchmark</h2>
			</div>
			<div class="row">
				<button id="play85Btn" class="primary">Play</button>
				<button id="stop85Btn" class="ghost" disabled>Stop</button>
				<div class="inputs">
					<label class="label" for="gapMsInput">Gap (ms)</label>
					<input id="gapMsInput" type="number" min="1" step="1" value="85" class="num">
					<label class="label" for="seriesInput">Series</label>
					<input id="seriesInput" type="number" min="1" step="1" value="2" class="num">
				</div>
			</div>
		</section>

		<section class="graph card">
			<div class="graph-header">
				<h2>Double-Tap Graph</h2>
				<div class="legend">
					<span class="dot ok"></span><span>≤ 85 ms</span>
					<span class="dot warn"></span><span>86–100 ms</span>
					<span class="dot red"></span><span>101–150 ms</span>
					<span class="dot black"></span><span>&gt; 150 ms</span>
				</div>
			</div>
			<div id="barChart" class="bar-chart" aria-label="Bar chart of pairwise A-button intervals"></div>
			<div class="graph-footer">
				<div>
					<div class="label">Average double tap speed</div>
					<div id="avgPair" class="value">—</div>
				</div>
				<div>
					<div class="label">Average time between double tap pairs (AvgBDTP)</div>
					<div id="avgAll" class="value">—</div>
				</div>
				<div>
					<div class="label">Total pairs</div>
					<div id="pairCount" class="value">0</div>
				</div>
				<div>
					<div class="label">Best Pair</div>
					<div id="bestPair" class="value">—</div>
				</div>
				<div>
					<div class="label">Worst Pair</div>
					<div id="worstPair" class="value">—</div>
				</div>
			</div>
		</section>

		<div class="made-by">
			<span>Created by <a id="fancyDuckLink" href="https://www.youtube.com/@FancyDuck_RL" target="_blank" rel="noopener noreferrer">FancyDuck</a></span>
			<img src="DuckSmall.jpg" alt="FancyDuck avatar" class="made-by-avatar">
		</div>

		<footer class="footer"></footer>
	</main>

	<!-- Linktree-style modal -->
	<div id="linktreeOverlay" class="lt-overlay" aria-hidden="true">
		<div class="lt-sheet" role="dialog" aria-modal="true" aria-labelledby="ltTitle">
			<img src="Duck.jpg" alt="FancyDuck profile picture" class="lt-avatar">
			<div id="ltTitle" class="lt-title">FancyDuck</div>
			<div class="lt-links">
				<a class="lt-btn" href="https://www.youtube.com/@FancyDuck_RL" target="_blank" rel="noopener noreferrer">
					<img src="youtube.png" alt="" class="lt-icon"><span>YouTube</span>
				</a>
				<a class="lt-btn" href="https://www.twitch.tv/fancyduck" target="_blank" rel="noopener noreferrer">
					<img src="Twitch.png" alt="" class="lt-icon"><span>Twitch</span>
				</a>
				<a class="lt-btn" href="https://discord.gg/nScYTuuJ8Q" target="_blank" rel="noopener noreferrer">
					<img src="discord.png" alt="" class="lt-icon"><span>Discord</span>
				</a>
			</div>
		</div>
	</div>

	<!-- About modal -->
	<div id="aboutOverlay" class="lt-overlay top" aria-hidden="true">
		<div class="lt-sheet" role="dialog" aria-modal="true" aria-labelledby="aboutTitle">
			<div id="aboutTitle" class="lt-title">About This Website</div>
			<div class="lt-links">
				<div class="about-text">
					This tool runs in your browser and reads inputs via the Web Gamepad and mouse/keyboard APIs.
					Small (≤ 10 ms) differences vs in-game or plugins can happen because of:
				</div>
				<ul class="about-list">
					<li>Controller report cadence and driver quantization (often 4–8 ms steps).</li>
					<li>Browser event loop and timer scheduling jitter.</li>
					<li>Analog-to-digital thresholds (pressed/value &gt; 0.5) vs true digital flags.</li>
					<li>Connection path (wired vs Bluetooth) and OS input stack timing.</li>
				</ul>
				<div class="about-text">
					We use high-frequency polling and precise timestamps to minimize this, but a small variance is expected.
				</div>
			</div>
		</div>
	</div>

	<script src="script.js"></script>
</body>
</html>


